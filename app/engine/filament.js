window.Filament||(window.Filament={gameDir:"./game/"}),Filament.loadScript=(e=>new Promise(t=>{e instanceof Array||(e=[e]);const n=document.createElement("script");n.src=e.shift(),e.length?n.onload=(()=>Filament.loadScript(e).then(t)):n.onload=t,document.head.append(n)})),Filament.loadStyle=(e=>{const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e),document.head.append(t)}),Filament.path=((...e)=>{let t="";for(;e.length;)e[0]?t+=`${t&&"/"!==t[t.length-1]?"/":""}${e.shift()}`:e.shift();return t}),Filament.gameFile=(e=>Filament.path(Filament.gameDir,e)),Filament.loadGame=(()=>{const e=["engine/engine.js"];Filament.electron&&(Filament.vue.$data.editor=!0,e.push("engine/editor.js")),e.push(Filament.gameFile("game.js")),Filament.loadScript(e)}),Filament.loadStyle(Filament.gameFile("style.css"));try{const{remote:e,ipcRenderer:t}=require("electron");Filament.electron={remote:e,ipc:t,mainProcess:e.require("./main.js"),window:e.getCurrentWindow(),dialog:e.dialog}}catch(e){}Filament.lzma=new LZMA("./lib/lzma_worker-min.js"),Filament.lzma.compress_promise=((e,t=1,n)=>new Promise((a,i)=>{Filament.lzma.compress(e,t,(e,t)=>{t?i(t):a(e)},n)})),Filament.lzma.decompress_promise=((e,t)=>new Promise((n,a)=>{Filament.lzma.decompress(e,(e,t)=>{t?a(t):n(e)},t)})),Filament.save=async function(){await Filament.lzma.compress_promise(Filament.savedata,1)},Filament.load=async function(){await Filament.lzma.decompress_promise("TODO")},Filament.vue=new Vue({el:"#wrapper",data:{activeScreen:null,screens:[],editor:!1,panels:{}}}),Filament.editorScreen=((e,t)=>{const n=Filament.vue.$data,a={id:n.screens.length,name:e,component:t};0===n.screens.length&&(n.activeScreen=a),n.screens.push(a)}),Filament.editorScreen("Map",{template:'<div id="screen-game" tabindex="0">\n\t\t<canvas id="pixi-canvas"></canvas>\n\t\t<div id="ui-container"></div>\n\t</div>',mounted(){Filament.loadGame()}});
//# sourceMappingURL=filament.js.map
