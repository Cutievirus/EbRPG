window.Filament||(window.Filament={gameDir:"./game/"}),Filament.loadScript=(e=>new Promise(n=>{e instanceof Array||(e=[e]);const t=document.createElement("script");t.src=e.shift(),e.length?t.onload=(()=>Filament.loadScript(e).then(n)):t.onload=n,document.head.append(t)})),Filament.loadStyle=(e=>{const n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e),document.head.append(n)}),Filament.gameFile=(e=>`${Filament.gameDir}${"/"===Filament.gameDir[Filament.gameDir.length-1]?"":"/"}${e}`),Filament.loadGame=(()=>{const e=["engine/engine.js"];Filament.electron&&e.push("engine/editor.js"),e.push(Filament.gameFile("game.js")),Filament.loadScript(e)}),Filament.loadStyle(Filament.gameFile("style.css"));try{const{remote:e,ipcRenderer:n}=require("electron");Filament.electron={remote:e,ipc:n,mainProcess:e.require("./main.js"),window:window=e.getCurrentWindow(),dialog:dialog=e.dialog}}catch(e){}Filament.lzma=new LZMA("./lib/lzma_worker-min.js"),Filament.lzma.compress_promise=((e,n=1,t)=>new Promise((a,i)=>{Filament.lzma.compress(e,n,(e,n)=>{n?i(n):a(e)},t)})),Filament.lzma.decompress_promise=((e,n)=>new Promise((t,a)=>{Filament.lzma.decompress(e,(e,n)=>{n?a(n):t(e)},n)})),Filament.save=async function(){await Filament.lzma.compress_promise(Filament.savedata,1)},Filament.load=async function(){await Filament.lzma.decompress_promise("TODO")},Filament.vue=new Vue({el:"#wrapper",data:{activeScreen:null,screens:[]}}),Filament.editorScreen=((e,n)=>{const t=Filament.vue.$data,a={id:t.screens.length,name:e,component:n};0===t.screens.length&&(t.activeScreen=a),t.screens.push(a)}),Filament.editorScreen("Map",{template:'<div id="screen-game">\n\t\t<canvas id="pixi-canvas"></canvas>\n\t\t<div id="ui-container"></div>\n\t</div>',mounted(){Filament.loadGame()}});
//# sourceMappingURL=filament.js.map
