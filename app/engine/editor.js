Filament.editorScreen("Tilesets",{template:'<div id="screen-tilesets">tileset</div>'}),Filament.vue.$data.panels.tileset={template:'<aside id="tileset-panel"\n\t:style="{\'--width\':tileset_width,\'--height\':tileset_height}">\n\t\t<select id="tileset-select">\n\t\t</select>\n\t\t<div class=\'editor-button-set\'>\n\t\t\t<button v-for="tool in tools"\n\t\t\t:data-rightTool="rightTool===tool.mode"\n\t\t\t:data-leftTool="leftTool===tool.mode"\n\t\t\t:data-tool="tool.mode"\n\t\t\t@click="pickTool"\n\t\t\t@contextmenu.prevent="pickTool"\n\t\t\t>\n\t\t\t\t<img draggable=false :src="tool.img">\n\t\t\t</button>\n\t\t</div>\n\t\t<div id="tileset-container">\n\t\t\t<div id="selectedTile" :style="{\'--x\':editor.tileBox.x,\'--y\':editor.tileBox.y,\'--w\':editor.tileBox.width,\'--h\':editor.tileBox.height, visibility:selectorVisibility}"></div>\n\t\t\t<img draggable=false :src="tileset_url" id="tileset"\n\t\t\t@mousedown="mousedown"\n\t\t\t@mousemove="mousemove"\n\t\t\t>\n\t\t</div>\n\t</aside>',data:()=>({tileset_url:void 0,tileset_width:96,tileset_height:96,tools:[{mode:Filament.PLACEMENT_MODE.PEN,img:"engine/img/tool-pen.png"},{mode:Filament.PLACEMENT_MODE.ERASE,img:"engine/img/tool-eraser.png"},{mode:Filament.PLACEMENT_MODE.FILL,img:"engine/img/tool-bucket.png"},{mode:Filament.PLACEMENT_MODE.RECT,img:"engine/img/tool-rect.png"},{mode:Filament.PLACEMENT_MODE.CLEARRECT,img:"engine/img/tool-clearrect.png"},{mode:Filament.PLACEMENT_MODE.CLONE,img:"engine/img/tool-clone.png"}],leftTool:Filament.editor.leftTool,rightTool:Filament.editor.rightTool,editor:Filament.editor,get selectorVisibility(){return this.editor.clone?"hidden":"visible"}}),methods:{pickTool(t){const e=t.target.getAttribute("data-tool");t.button>0?(this.rightTool=e,Filament.editor.rightTool=e):(this.leftTool=e,Filament.editor.leftTool=e)},selectTile(t){const e=Filament.settings.tileSize*Filament.scale,i=Filament.editor.tileBox;i.ox=i.x=Math.floor(t.offsetX/e),i.oy=i.y=Math.floor(t.offsetY/e),i.width=1,i.height=1,Filament.editor.clone=!1},mousedown(t){this.selectTile(t),this.mouseIsDown=!0},mouseup(t){this.mouseIsDown=!1},mousemove(t){if(!this.mouseIsDown)return;const e=Filament.settings.tileSize*Filament.scale,i=Math.floor(t.offsetX/e),o=Math.floor(t.offsetY/e);Filament.TileSelector.prototype.dragSelection.call(null,Filament.editor.tileBox,i,o)}},async created(){const t=await Filament.cache.requestTileset(Filament.editor.tilesetId);Filament.editor.tileset=t,this.tileset_url=t.image.baseTexture.imageUrl,this.tileset_width=t.image.baseTexture.width,this.tileset_height=t.image.baseTexture.height,Filament.resize(),this.mouseup_event=Filament.mouse.addEvent("mouseup",this.mouseup,this)},beforeDestroy(){Filament.mouse.removeEvent("mouseup",this.mouseup_event)}},Filament.events.addEvent("resize",()=>{const t=document.getElementById("tileset").getBoundingClientRect(),e=document.getElementById("tileset-panel");e.style.width=t.width+"px",e.style.setProperty("--tileset-x",t.x),e.style.setProperty("--tileset-y",t.y),e.style.setProperty("--tileset-width",t.width),e.style.setProperty("--tileset-height",t.height)});
//# sourceMappingURL=editor.js.map
